#include "./MMIO/mmio.h"

#define msz 16

void mxm(int*A,int*B,int*C);

int A[msz][msz] = {{1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,8,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,8,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,8,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,8,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4}};

int B[msz][msz] = {{1,2,3,7,3,2,3,4,1,0,3,4,1,2,3,4},
                   {1,0,3,7,3,2,3,4,1,0,3,4,1,2,9,4},
                   {1,0,3,1,3,2,3,4,1,0,3,4,1,2,9,4},
                   {1,0,3,4,3,1,3,4,1,0,3,4,1,2,9,4},
                   {1,0,3,4,1,1,3,4,1,0,3,4,1,2,9,4},
                   {1,0,3,4,1,1,3,4,1,2,3,8,1,2,9,4},
                   {1,0,3,4,4,2,3,7,1,2,3,8,1,2,9,4},
                   {1,4,3,0,4,2,3,7,1,2,9,3,1,2,3,4},
                   {1,4,3,0,4,2,3,7,1,2,9,3,1,7,3,4},
                   {8,4,3,0,4,2,3,4,1,2,9,3,1,7,3,4},
                   {8,4,0,0,1,0,3,1,1,2,9,3,1,7,3,4},
                   {8,2,0,0,1,0,3,1,1,2,3,8,1,7,3,4},
                   {8,2,0,0,1,0,3,1,1,2,3,8,1,7,3,4},
                   {1,2,0,4,1,0,3,1,1,2,3,8,1,7,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4},
                   {1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4}};

int C[msz][msz] = {{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}};

int D[msz][msz] = {{1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                   {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}};

int main() {

  C[0][0] = 0;
  D[0][0] = 0;

  print_MSR('S');
  mxm((int*)A,(int*)B,(int*)C);
  print_MSR('E');

  for (int i = 0; i < msz; ++i)
    for (int j = 0; j < msz; ++j)
      for (int k = 0; k < msz; ++k)
        D[i][j]+=A[i][k]*B[k][j];

  for (int i = 0; i < msz; ++i)
    for (int j = 0; j < msz; ++j)
      if(C[i][j]!=D[i][j]) {
        print_MSG('F');
        print_HEX(i);
        print_HEX(j);
        print_HEX(C[i][j]);
        print_HEX(D[i][j]);
        return 1;
      }

  print_MSG('P');

  return 0;
}